import{ad as ze,w as c,ac as ke,af as We,v as w,bb as Ue,J as L,H as a,K as Pe,z as X,av as Fe,aN as Xe,ak as we,m as Ye,bc as Je,q as ee,aC as Se,bd as Ze,t as te,x as Ne,be as qe,R as Qe,y as Ie,ae,bf as Ge,bg as et,bh as tt,N as at,Q as B,am as ot,aw as st,D as f,E as x,a1 as m,P as oe,G as b,F as j,a2 as F,X as S,W as R,Y as W,aJ as A,at as se,O as nt,bi as lt,aI as rt,al as it,a0 as U,Z as ut,_ as ct,ao as Ee,a4 as dt}from"./index-ce2c75b3.js";import{f as le,a as Ve,u as pt,i as ft}from"./base-06332f8d.js";class vt extends Error{constructor(s){super(s),this.name="ElementPlusError"}}function Lt(o,s){throw new vt(`[${o}] ${s}`)}function Dt(o,s){}const ne="update:modelValue",mt=()=>ze&&/firefox/i.test(window.navigator.userAgent),ht=o=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(o),yt=["class","style"],bt=/^on[A-Z]/,gt=(o={})=>{const{excludeListeners:s=!1,excludeKeys:n}=o,t=c(()=>((n==null?void 0:n.value)||[]).concat(yt)),l=ke();return l?c(()=>{var r;return We(Object.entries((r=l.proxy)==null?void 0:r.$attrs).filter(([u])=>!t.value.includes(u)&&!(s&&bt.test(u))))}):c(()=>({}))},_e=o=>{const s=ke();return c(()=>{var n,t;return(t=((n=s.proxy)==null?void 0:n.$props)[o])!=null?t:void 0})};function xt(o){const s=w();function n(){if(o.value==null)return;const{selectionStart:l,selectionEnd:r,value:u}=o.value;if(l==null||r==null)return;const y=u.slice(0,Math.max(0,l)),p=u.slice(Math.max(0,r));s.value={selectionStart:l,selectionEnd:r,value:u,beforeTxt:y,afterTxt:p}}function t(){if(o.value==null||s.value==null)return;const{value:l}=o.value,{beforeTxt:r,afterTxt:u,selectionStart:y}=s.value;if(r==null||u==null||y==null)return;let p=l.length;if(l.endsWith(u))p=l.length-u.length;else if(l.startsWith(r))p=r.length;else{const h=r[y-1],I=l.indexOf(h,y-1);I!==-1&&(p=I+1)}o.value.setSelectionRange(p,p)}return[n,t]}const wt=(o,s={})=>{const n=w(void 0),t=s.prop?n:_e("size"),l=s.global?n:Ue(),r=s.form?{size:void 0}:L(le,void 0),u=s.formItem?{size:void 0}:L(Ve,void 0);return c(()=>t.value||a(o)||(u==null?void 0:u.size)||(r==null?void 0:r.size)||l.value||"")},St=o=>{const s=_e("disabled"),n=L(le,void 0);return c(()=>s.value||a(o)||(n==null?void 0:n.disabled)||!1)},It=()=>{const o=L(le,void 0),s=L(Ve,void 0);return{form:o,formItem:s}},Et=(o,{formItemContext:s,disableIdGeneration:n,disableIdManagement:t})=>{n||(n=w(!1)),t||(t=w(!1));const l=w();let r;const u=c(()=>{var y;return!!(!o.label&&s&&s.inputIds&&((y=s.inputIds)==null?void 0:y.length)<=1)});return Pe(()=>{r=X([Fe(o,"id"),n],([y,p])=>{const h=y??(p?void 0:pt().value);h!==l.value&&(s!=null&&s.removeInputId&&(l.value&&s.removeInputId(l.value),!(t!=null&&t.value)&&!p&&h&&s.addInputId(h)),l.value=h)},{immediate:!0})}),Xe(()=>{r&&r(),s!=null&&s.removeInputId&&l.value&&s.removeInputId(l.value)}),{isLabeledByFormItem:u,inputId:l}};let g;const Ct=`
  height:0 !important;
  visibility:hidden !important;
  ${mt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,zt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function kt(o){const s=window.getComputedStyle(o),n=s.getPropertyValue("box-sizing"),t=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),l=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:zt.map(u=>`${u}:${s.getPropertyValue(u)}`).join(";"),paddingSize:t,borderSize:l,boxSizing:n}}function Ce(o,s=1,n){var t;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:l,borderSize:r,boxSizing:u,contextStyle:y}=kt(o);g.setAttribute("style",`${y};${Ct}`),g.value=o.value||o.placeholder||"";let p=g.scrollHeight;const h={};u==="border-box"?p=p+r:u==="content-box"&&(p=p-l),g.value="";const I=g.scrollHeight-l;if(we(s)){let v=I*s;u==="border-box"&&(v=v+l+r),p=Math.max(v,p),h.minHeight=`${v}px`}if(we(n)){let v=I*n;u==="border-box"&&(v=v+l+r),p=Math.min(v,p)}return h.height=`${p}px`,(t=g.parentNode)==null||t.removeChild(g),g=void 0,h}const Pt=Ye({id:{type:String,default:void 0},size:Je,disabled:Boolean,modelValue:{type:ee([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ee([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Se},prefixIcon:{type:Se},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ee([Object,Array,String]),default:()=>Ze({})}}),Ft={[ne]:o=>te(o),input:o=>te(o),change:o=>te(o),focus:o=>o instanceof FocusEvent,blur:o=>o instanceof FocusEvent,clear:()=>!0,mouseleave:o=>o instanceof MouseEvent,mouseenter:o=>o instanceof MouseEvent,keydown:o=>o instanceof Event,compositionstart:o=>o instanceof CompositionEvent,compositionupdate:o=>o instanceof CompositionEvent,compositionend:o=>o instanceof CompositionEvent},Nt=["role"],Vt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],_t=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],$t=Ne({name:"ElInput",inheritAttrs:!1}),Tt=Ne({...$t,props:Pt,emits:Ft,setup(o,{expose:s,emit:n}){const t=o,l=qe(),r=Qe(),u=c(()=>{const e={};return t.containerRole==="combobox"&&(e["aria-haspopup"]=l["aria-haspopup"],e["aria-owns"]=l["aria-owns"],e["aria-expanded"]=l["aria-expanded"]),e}),y=c(()=>[t.type==="textarea"?ie.b():i.b(),i.m($e.value),i.is("disabled",k.value),i.is("exceed",Re.value),{[i.b("group")]:r.prepend||r.append,[i.bm("group","append")]:r.append,[i.bm("group","prepend")]:r.prepend,[i.m("prefix")]:r.prefix||t.prefixIcon,[i.m("suffix")]:r.suffix||t.suffixIcon||t.clearable||t.showPassword,[i.bm("suffix","password-clear")]:M.value&&Z.value},l.class]),p=c(()=>[i.e("wrapper"),i.is("focus",N.value)]),h=gt({excludeKeys:c(()=>Object.keys(u.value))}),{form:I,formItem:v}=It(),{inputId:re}=Et(t,{formItemContext:v}),$e=wt(),k=St(),i=Ie("input"),ie=Ie("textarea"),D=ae(),C=ae(),N=w(!1),Y=w(!1),V=w(!1),K=w(!1),ue=w(),J=ae(t.inputStyle),_=c(()=>D.value||C.value),ce=c(()=>{var e;return(e=I==null?void 0:I.statusIcon)!=null?e:!1}),$=c(()=>(v==null?void 0:v.validateState)||""),de=c(()=>$.value&&Ge[$.value]),Te=c(()=>K.value?et:tt),Be=c(()=>[l.style,t.inputStyle]),pe=c(()=>[t.inputStyle,J.value,{resize:t.resize}]),E=c(()=>ft(t.modelValue)?"":String(t.modelValue)),M=c(()=>t.clearable&&!k.value&&!t.readonly&&!!E.value&&(N.value||Y.value)),Z=c(()=>t.showPassword&&!k.value&&!t.readonly&&!!E.value&&(!!E.value||N.value)),P=c(()=>t.showWordLimit&&!!h.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!k.value&&!t.readonly&&!t.showPassword),q=c(()=>E.value.length),Re=c(()=>!!P.value&&q.value>Number(h.value.maxlength)),Ae=c(()=>!!r.suffix||!!t.suffixIcon||M.value||t.showPassword||P.value||!!$.value&&ce.value),[Le,De]=xt(D);at(C,e=>{if(!P.value||t.resize!=="both")return;const d=e[0],{width:z}=d.contentRect;ue.value={right:`calc(100% - ${z+15+6}px)`}});const O=()=>{const{type:e,autosize:d}=t;if(!(!ze||e!=="textarea"||!C.value))if(d){const z=Ee(d)?d.minRows:void 0,G=Ee(d)?d.maxRows:void 0;J.value={...Ce(C.value,z,G)}}else J.value={minHeight:Ce(C.value).minHeight}},T=()=>{const e=_.value;!e||e.value===E.value||(e.value=E.value)},Q=async e=>{Le();let{value:d}=e.target;if(t.formatter&&(d=t.parser?t.parser(d):d,d=t.formatter(d)),!V.value){if(d===E.value){T();return}n(ne,d),n("input",d),await B(),T(),De()}},fe=e=>{n("change",e.target.value)},ve=e=>{n("compositionstart",e),V.value=!0},me=e=>{var d;n("compositionupdate",e);const z=(d=e.target)==null?void 0:d.value,G=z[z.length-1]||"";V.value=!ht(G)},he=e=>{n("compositionend",e),V.value&&(V.value=!1,Q(e))},Ke=()=>{K.value=!K.value,H()},H=async()=>{var e;await B(),(e=_.value)==null||e.focus()},Me=()=>{var e;return(e=_.value)==null?void 0:e.blur()},ye=e=>{N.value=!0,n("focus",e)},be=e=>{var d;N.value=!1,n("blur",e),t.validateEvent&&((d=v==null?void 0:v.validate)==null||d.call(v,"blur").catch(z=>void 0))},Oe=e=>{Y.value=!1,n("mouseleave",e)},He=e=>{Y.value=!0,n("mouseenter",e)},ge=e=>{n("keydown",e)},je=()=>{var e;(e=_.value)==null||e.select()},xe=()=>{n(ne,""),n("change",""),n("clear"),n("input","")};return X(()=>t.modelValue,()=>{var e;B(()=>O()),t.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(d=>void 0))}),X(E,()=>T()),X(()=>t.type,async()=>{await B(),T(),O()}),Pe(()=>{!t.formatter&&t.parser,T(),B(O)}),s({input:D,textarea:C,ref:_,textareaStyle:pe,autosize:Fe(t,"autosize"),focus:H,blur:Me,select:je,clear:xe,resizeTextarea:O}),(e,d)=>ot((f(),x("div",se(a(u),{class:a(y),style:a(Be),role:e.containerRole,onMouseenter:He,onMouseleave:Oe}),[m(" input "),e.type!=="textarea"?(f(),x(oe,{key:0},[m(" prepend slot "),e.$slots.prepend?(f(),x("div",{key:0,class:b(a(i).be("group","prepend"))},[j(e.$slots,"prepend")],2)):m("v-if",!0),F("div",{class:b(a(p))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),x("span",{key:0,class:b(a(i).e("prefix"))},[F("span",{class:b(a(i).e("prefix-inner")),onClick:H},[j(e.$slots,"prefix"),e.prefixIcon?(f(),S(a(A),{key:0,class:b(a(i).e("icon"))},{default:R(()=>[(f(),S(W(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),F("input",se({id:a(re),ref_key:"input",ref:D,class:a(i).e("inner")},a(h),{type:e.showPassword?K.value?"text":"password":e.type,disabled:a(k),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:t.form,onCompositionstart:ve,onCompositionupdate:me,onCompositionend:he,onInput:Q,onFocus:ye,onBlur:be,onChange:fe,onKeydown:ge}),null,16,Vt),m(" suffix slot "),a(Ae)?(f(),x("span",{key:1,class:b(a(i).e("suffix"))},[F("span",{class:b(a(i).e("suffix-inner")),onClick:H},[!a(M)||!a(Z)||!a(P)?(f(),x(oe,{key:0},[j(e.$slots,"suffix"),e.suffixIcon?(f(),S(a(A),{key:0,class:b(a(i).e("icon"))},{default:R(()=>[(f(),S(W(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),a(M)?(f(),S(a(A),{key:1,class:b([a(i).e("icon"),a(i).e("clear")]),onMousedown:rt(a(it),["prevent"]),onClick:xe},{default:R(()=>[nt(a(lt))]),_:1},8,["class","onMousedown"])):m("v-if",!0),a(Z)?(f(),S(a(A),{key:2,class:b([a(i).e("icon"),a(i).e("password")]),onClick:Ke},{default:R(()=>[(f(),S(W(a(Te))))]),_:1},8,["class"])):m("v-if",!0),a(P)?(f(),x("span",{key:3,class:b(a(i).e("count"))},[F("span",{class:b(a(i).e("count-inner"))},U(a(q))+" / "+U(a(h).maxlength),3)],2)):m("v-if",!0),a($)&&a(de)&&a(ce)?(f(),S(a(A),{key:4,class:b([a(i).e("icon"),a(i).e("validateIcon"),a(i).is("loading",a($)==="validating")])},{default:R(()=>[(f(),S(W(a(de))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(f(),x("div",{key:1,class:b(a(i).be("group","append"))},[j(e.$slots,"append")],2)):m("v-if",!0)],64)):(f(),x(oe,{key:1},[m(" textarea "),F("textarea",se({id:a(re),ref_key:"textarea",ref:C,class:a(ie).e("inner")},a(h),{tabindex:e.tabindex,disabled:a(k),readonly:e.readonly,autocomplete:e.autocomplete,style:a(pe),"aria-label":e.label,placeholder:e.placeholder,form:t.form,onCompositionstart:ve,onCompositionupdate:me,onCompositionend:he,onInput:Q,onFocus:ye,onBlur:be,onChange:fe,onKeydown:ge}),null,16,_t),a(P)?(f(),x("span",{key:0,style:ut(ue.value),class:b(a(i).e("count"))},U(a(q))+" / "+U(a(h).maxlength),7)):m("v-if",!0)],64))],16,Nt)),[[st,e.type!=="hidden"]])}});var Bt=ct(Tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Kt=dt(Bt);export{Kt as E,Dt as d,Lt as t,wt as u};
